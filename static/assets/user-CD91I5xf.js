import"./modulepreload-polyfill-B5Qt9EMX.js";import"./main-C5KVrVRe.js";import{S as l}from"./sweetalert2.esm.all-BccGxJ0c.js";/* empty css                   */const m={1:{name:"Juan Pérez",email:"juan.perez@example.com",phone:"3105455484",status:!0},2:{name:"María López",email:"maria.lopez@example.com",phone:"3105455484",status:!1},3:{name:"Carlos García",email:"carlos.garcia@example.com",phone:"3115455484",status:!1},4:{name:"Ana Martínez",email:"ana.martinez@example.com",phone:"3125455484",status:!0},5:{name:"Luis Fernández",email:"luis.fernandez@example.com",phone:"3135455484",status:!1},6:{name:"Luis Garcia",email:"luis.garcia@example.com",phone:"3105455484",status:!1}};let i=JSON.parse(localStorage.getItem("user"));(i==null||i==null)&&(localStorage.setItem("user",JSON.stringify(m)),i=m);const h=async()=>{const n=await(await fetch("http://localhost:80/api/auth/user",{credentials:"include"})).json(),a={Admin:"Administrador",Worker:"Empleado"};n.forEach(t=>{f(t.documentNumber,t.username,t.email,t.phone,a[t.rol],t.state)})};document.addEventListener("DOMContentLoaded",h);const d=document.querySelector("tbody"),p=document.querySelector("#search-user"),f=(e,n,a,t,o,s)=>{const c=document.createElement("tr"),b=`<td><span class="badge rounded-pill text-bg-${o=="Administrador"?"secondary":"success"}">${o}</span></td>`,y=`<a href="./usuario-form.html?_id=${e}" class="btn btn-outline-warning" role="button" aria-pressed="true"><i class="ti ti-writing-sign"></i></a>`;c.innerHTML=`<th scope="row" title="${e}">${e}</th>
        <td title=${n}>${n.substring(0,15)}</td>
        <td title=${a}>${a.substring(0,15)}</td>
        <td>${t}</td>
        ${b}
        <td>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="${e}" ${s?"checked":""}>
        </div>
        </td>
        <td>
            <div class="col">
            <button type="button" class="btn btn-outline-success" title="Ver detalle"><i class="ti ti-eye"></i></button>
            ${y}
            <button type="button" class="btn btn-outline-danger"><i class="ti ti-trash"></i></button>
            </div>
        </td>
    `;const r=c.querySelector("input"),v=c.querySelector(".btn.btn-outline-danger");r.addEventListener("change",w=>{l.fire({title:"¿Está seguro de cambiar estado a "+(r.checked?"activo":"inactivo")+"?",text:"El usuario sera notificado de su nuevo estado",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, cambiar!"}).then(u=>{u.isConfirmed?(l.fire({title:"Cambiado!",text:"El estado del rol ha sido cambiado correctamente.",icon:"success",timer:1500}),S(e,r.checked)):r.checked=!r.checked})}),v.addEventListener("click",w=>{l.fire({title:"¿Está seguro de eliminar este usuario?",text:"Una vez eliminado, no se podrá recuperar",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar!"}).then(u=>{u.isConfirmed&&l.fire("Eliminado!","El usuario ha sido eliminado correctamente.","success")})}),d.appendChild(c)},S=(e,n)=>{i[e].status=n,localStorage.setItem("user",JSON.stringify(i))},E=async(e,n)=>{const a={};a[e]=n;const o=await(await fetch("http://localhost:80/api/auth/user/search",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)})).json();return o.message?[]:[...o]},g=async e=>{const n=document.getElementById("filter-user"),a=e.target.value.length;if(a<4)return a===0&&(d.innerHTML="",h()),null;const t=await E(n.value,e.target.value);d.innerHTML="";for(let o=0;o<t.length;o++){const s=t[o];f(s.documentNumber,s.username,s.email,s.phone,s.rol,s.status)}t.length==0&&(d.innerHTML="<tr><td colspan='5'>No se encontraron resultados</td></tr>")};p.addEventListener("keyup",e=>g(e));p.addEventListener("mousedown",e=>g(e));
