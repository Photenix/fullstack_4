import"./main-D_gjJzFE.js";import{S as c}from"./sweetalert2.esm.all-BccGxJ0c.js";const u={1:{name:"Juan Pérez",email:"juan.perez@example.com",phone:"3105455484",status:!0},2:{name:"María López",email:"maria.lopez@example.com",phone:"3105455484",status:!1},3:{name:"Carlos García",email:"carlos.garcia@example.com",phone:"3115455484",status:!1},4:{name:"Ana Martínez",email:"ana.martinez@example.com",phone:"3125455484",status:!0},5:{name:"Luis Fernández",email:"luis.fernandez@example.com",phone:"3135455484",status:!1},6:{name:"Luis Garcia",email:"luis.garcia@example.com",phone:"3105455484",status:!1}};let o=JSON.parse(localStorage.getItem("user"));(o==null||o==null)&&(localStorage.setItem("user",JSON.stringify(u)),o=u);document.addEventListener("DOMContentLoaded",async()=>{const a=await(await fetch("http://localhost:80/api/auth/user",{credentials:"include"})).json(),n={Admin:"Administrador",Worker:"Empleado"};a.forEach(t=>{h(t._id,t.username,t.email,t.phone,n[t.rol],t.state)})});const d=document.querySelector("tbody"),m=document.querySelector("#search-user"),h=(e,a,n,t,r,f)=>{const i=document.createElement("tr");i.innerHTML=`<th scope="row" title="${e}">${e.substring(0,10)}</th>
        <td>${a}</td>
        <td>${n}</td>
        <td>${t}</td>
        <td><span class="badge rounded-pill text-bg-secondary">${r}</span></td>
        <td>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="${e}" ${f?"checked":""}>
        </div>
        </td>
        <td>
            <a href="./a-e-usuario.html" class="btn btn-outline-warning" role="button" aria-pressed="true"><i class="ti ti-writing-sign"></i></a>
            <button type="button" class="btn btn-outline-danger"><i class="ti ti-trash"></i></button>
        </td>
    `;const s=i.querySelector("input"),g=i.querySelector(".btn.btn-outline-danger");s.addEventListener("change",b=>{c.fire({title:"¿Está seguro de cambiar estado a "+(s.checked?"activo":"inactivo")+"?",text:"El usuario sera notificado de su nuevo estado",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, cambiar!"}).then(l=>{l.isConfirmed?(c.fire({title:"Cambiado!",text:"El estado del rol ha sido cambiado correctamente.",icon:"success",timer:1500}),w(e,s.checked)):s.checked=!s.checked})}),g.addEventListener("click",b=>{c.fire({title:"¿Está seguro de eliminar este usuario?",text:"Una vez eliminado, no se podrá recuperar",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar!"}).then(l=>{l.isConfirmed&&(delete o[e],localStorage.setItem("user",JSON.stringify(o)),c.fire("Eliminado!","El usuario ha sido eliminado correctamente.","success"),window.location.href="./usuarios.html")})}),d.appendChild(i)},w=(e,a)=>{o[e].status=a,localStorage.setItem("user",JSON.stringify(o))},S=(e,a)=>Object.entries(o).filter(([n,t])=>e=="id"?n==a:t[e].toLowerCase().startsWith(a.toLowerCase())),p=e=>{const a=document.getElementById("filter-user"),n=S(a.value,e.target.value);d.innerHTML="",n.forEach(([t,r])=>{h(t,r.name,r.email,r.phone,r.status)}),n.length==0&&(d.innerHTML="<tr><td colspan='5'>No se encontraron resultados</td></tr>")};m.addEventListener("keyup",e=>p(e));m.addEventListener("mousedown",e=>p(e));
